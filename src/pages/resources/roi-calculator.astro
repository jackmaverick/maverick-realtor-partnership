---
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout
  title="Roof Cost Calculator | Roof Kit"
  description="Quickly estimate roof replacement pricing by squares and shingle type so you can price listings with confidence."
>
  <!-- Hero -->
  <section class="relative overflow-hidden py-16 md:py-24">
    <div class="absolute inset-0 bg-gradient-to-br from-blue-200 via-sky-200 to-violet-200"></div>
    <div class="absolute inset-0 bg-gradient-to-tr from-white/40 via-transparent to-violet-200/40"></div>

    <div class="relative mx-auto max-w-5xl px-4 sm:px-6 lg:px-8">
      <a href="/resources" class="mb-8 inline-flex items-center font-semibold text-blue-700 transition hover:text-blue-800 group">
        <span class="transition-transform group-hover:-translate-x-1">‚Üê</span>
        <span class="ml-2">Back to Resources</span>
      </a>

      <div class="inline-flex items-center gap-2 rounded-full border border-blue-200 bg-gradient-to-r from-blue-100 to-violet-100 px-4 py-2 mb-6">
        <span class="text-2xl">üìê</span>
        <span class="text-sm font-semibold text-blue-700">Estimator Tool</span>
      </div>

      <h1 class="mb-6 text-4xl font-bold leading-tight text-gray-900 md:text-5xl">
        Roof Replacement{' '}
        <span class="bg-gradient-to-r from-blue-600 to-violet-600 bg-clip-text text-transparent">
          Cost Calculator
        </span>
      </h1>

      <p class="mb-6 text-xl text-gray-700">
        Enter the roof size (in squares) and choose the shingle system to see real-world cost ranges we use on real estate deals.
        Need the square count? Call us and we‚Äôll run a measurement report in minutes.
      </p>

      <div class="inline-flex items-center gap-3 rounded-xl bg-white/70 px-5 py-3 text-sm font-semibold text-blue-700 shadow">
        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        We guarantee a 2-hour response when you call <a href="tel:9132988759" class="ml-1 font-bold text-blue-800 underline underline-offset-2">(913) 298-8759</a> for measurements.
      </div>
    </div>
  </section>

  <!-- Calculator -->
  <section class="bg-white py-16">
    <div class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8">
      <div class="grid gap-10 rounded-3xl border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-violet-50 p-8 md:grid-cols-2 md:p-12">
        <!-- Inputs -->
        <div>
          <h2 class="mb-6 text-2xl font-bold text-gray-900">Enter Your Numbers</h2>

          <div class="space-y-6">
            <div>
              <label for="totalSquares" class="mb-2 block text-sm font-semibold text-gray-700">
                Total Roof Squares (1 square = 100 sq. ft.)
              </label>
              <input
                type="number"
                id="totalSquares"
                min="5"
                step="0.5"
                value="28"
                class="w-full rounded-lg border-2 border-gray-200 px-4 py-3 text-lg font-semibold focus:border-blue-500 focus:outline-none"
              />
              <p class="mt-2 text-sm text-gray-500">
                Not sure of the squares? Call us and we‚Äôll run a measurement report so you have the exact number to plug in.
              </p>
            </div>

            <div>
              <span class="mb-2 block text-sm font-semibold text-gray-700">Pick Your Shingle System</span>
              <div class="space-y-3 rounded-2xl border border-blue-200 bg-white p-4">
                <label class="flex cursor-pointer items-start gap-3 rounded-xl border border-transparent p-3 hover:border-blue-300 hover:bg-blue-50">
                  <input type="radio" name="roofSystem" value="cambridge" class="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500" checked />
                  <div>
                    <p class="font-semibold text-gray-900">IKO Cambridge Class 3 Impact Resistant</p>
                    <p class="text-sm text-gray-600">Lifetime warranty bundle. Everyday price $425/sq ‚Äî realtor pricing $400/sq.</p>
                  </div>
                </label>

                <label class="flex cursor-pointer items-start gap-3 rounded-xl border border-transparent p-3 hover:border-blue-300 hover:bg-blue-50">
                  <input type="radio" name="roofSystem" value="dynasty" class="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500" />
                  <div>
                    <p class="font-semibold text-gray-900">IKO Dynasty Class 4 Impact Resistant</p>
                    <p class="text-sm text-gray-600">Upgraded hail protection. Everyday price $450/sq ‚Äî realtor pricing $425/sq.</p>
                  </div>
                </label>

                <label class="flex cursor-pointer items-start gap-3 rounded-xl border border-transparent p-3 hover:border-blue-300 hover:bg-blue-50">
                  <input type="radio" name="roofSystem" value="nordic" class="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500" />
                  <div>
                    <p class="font-semibold text-gray-900">IKO Nordic Class 4 Impact Resistant</p>
                    <p class="text-sm text-gray-600">Premium impact & wind performance. Everyday price $475/sq ‚Äî realtor pricing $460/sq.</p>
                  </div>
                </label>
              </div>
            </div>

            <label class="flex items-center gap-3 rounded-xl border border-blue-200 bg-white px-4 py-3 text-sm font-medium text-gray-800">
              <input type="checkbox" id="useRealtorPricing" class="h-4 w-4 text-blue-600 focus:ring-blue-500" checked />
              Apply realtor deal pricing (what we typically use to get transactions across the finish line).
            </label>
          </div>
        </div>

        <!-- Results -->
        <div>
          <h2 class="mb-6 text-2xl font-bold text-gray-900">Cost Snapshot</h2>

          <div class="space-y-6" id="costResults">
            <div class="rounded-2xl border-2 border-blue-200 bg-white p-6 shadow-sm">
              <div class="mb-4 flex items-center justify-between">
                <span class="text-gray-600 font-semibold">Selected System</span>
                <div id="systemBadge" class="rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 px-3 py-1 text-sm font-semibold text-white">
                  IKO Cambridge
                </div>
              </div>
              <p class="text-xl font-bold text-gray-900">
                $<span id="pricePerSquare">400</span> <span class="text-base font-semibold text-gray-500">per square (applied)</span>
              </p>
              <p class="mt-1 text-sm text-gray-500">
                Everyday price $<span id="standardPrice">425</span> /sq ‚Ä¢ Realtor pricing $<span id="realtorPrice">400</span> /sq
              </p>
            </div>

            <div class="rounded-2xl border-2 border-emerald-200 bg-white p-6 shadow-sm">
              <div class="mb-4 flex items-center justify-between">
                <span class="text-gray-600 font-semibold">Total Roof Investment</span>
                <div class="h-10 w-10 rounded-lg bg-gradient-to-br from-emerald-400 to-green-500 text-center text-2xl text-white">
                  üíµ
                </div>
              </div>
              <p class="text-3xl font-bold text-emerald-600">
                $<span id="appliedTotal">11,200</span>
              </p>
              <p class="mt-1 text-sm text-gray-500">
                Standard pricing total: $<span id="standardTotal">11,900</span>
              </p>
            </div>

            <div class="rounded-2xl border-2 border-orange-200 bg-white p-6 shadow-sm">
              <div class="mb-4 flex items-center justify-between">
                <span class="text-gray-600 font-semibold">Margin & Negotiation Room</span>
                <div class="h-10 w-10 rounded-lg bg-gradient-to-br from-orange-400 to-pink-500 text-center text-2xl text-white">
                  ü§ù
                </div>
              </div>
              <p class="text-lg font-semibold text-gray-900">
                We routinely trim pricing to meet budget‚Äîusually 5-10% (like moving $450/sq down to $400/sq) while protecting quality.
              </p>
              <p class="mt-2 text-sm text-gray-500">
                Let us know what the deal needs. We‚Äôll review scope, check supplier incentives, and adjust margins to get it closed.
              </p>
            </div>

            <div class="rounded-xl bg-blue-100 p-4 text-sm text-blue-800">
              <strong>Pro Tip:</strong> Gutters typically run $12‚Äì$16 per linear foot, and window wraps average $300‚Äì$450 each.
              Add those to your estimate as needed‚Äîwe‚Äôll bundle them so the project is turnkey for your client.
            </div>
          </div>
        </div>
      </div>

      <div class="mt-10 rounded-2xl border border-blue-200 bg-white p-6 space-y-5">
        <div class="space-y-2">
          <p class="text-lg font-semibold text-gray-900">Ready for exact numbers?</p>
          <p class="text-sm text-gray-600">
            Call with the property address plus your email or cell number and we‚Äôll send a detailed measurement report, photos, and a pricing matrix the same day.
          </p>
          <p class="text-sm text-gray-600">
            Once we have the report, we‚Äôll give you the exact square count so you can plug it back into this calculator or talk through pricing live.
          </p>
        </div>
        <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4">
          <a
            href="tel:9132988759"
            class="inline-flex w-full flex-col items-center gap-1 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-10 py-4 text-sm font-semibold text-white shadow-lg transition hover:from-blue-700 hover:to-indigo-700 md:w-64 md:items-start"
          >
            <span>Call Now</span>
            <span class="text-base font-bold whitespace-nowrap">(913) 298-8759</span>
          </a>
          <a
            href="/contact"
            class="inline-flex items-center gap-2 rounded-xl border border-blue-300 px-6 py-3 text-sm font-semibold text-blue-700 transition hover:bg-blue-50"
          >
            Request Measurement Report ‚Üí
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Education Sections -->
  <section class="bg-gray-50 py-16">
    <div class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8">
      <div class="mb-12 text-center">
        <h2 class="text-3xl font-bold text-gray-900">How Realtors Use This Calculator</h2>
        <p class="mt-3 text-lg text-gray-600">
          We keep the math simple so you can talk through costs with confidence‚Äîeven before we pull the official measurement.
        </p>
      </div>

      <div class="grid gap-6 md:grid-cols-3">
        <div class="rounded-2xl border border-blue-100 bg-white p-6">
          <div class="mb-4 inline-flex h-12 w-12 items-center justify-center rounded-xl bg-blue-100 text-blue-600">
            üìè
          </div>
          <h3 class="text-xl font-semibold text-gray-900">1. Get the Squares</h3>
          <p class="mt-2 text-sm text-gray-600">
            Divide home square footage by 100 for a quick ballpark. Our hover + drone measurements tighten it up for contract work.
          </p>
        </div>

        <div class="rounded-2xl border border-blue-100 bg-white p-6">
          <div class="mb-4 inline-flex h-12 w-12 items-center justify-center rounded-xl bg-blue-100 text-blue-600">
            üßÆ
          </div>
          <h3 class="text-xl font-semibold text-gray-900">2. Choose the System</h3>
          <p class="mt-2 text-sm text-gray-600">
            Match the shingle to the buyer's expectations‚ÄîCambridge for value, Dynasty for premium hail protection, Nordic for top-tier curb appeal.
          </p>
        </div>

        <div class="rounded-2xl border border-blue-100 bg-white p-6">
          <div class="mb-4 inline-flex h-12 w-12 items-center justify-center rounded-xl bg-blue-100 text-blue-600">
            ü§ù
          </div>
          <h3 class="text-xl font-semibold text-gray-900">3. Call Us to Finalize</h3>
          <p class="mt-2 text-sm text-gray-600">
            We‚Äôll align on margins, lock the price per square, and deliver an estimate that works for your buyer, seller, and lender.
          </p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  const roofSystems = {
    cambridge: {
      name: 'IKO Cambridge Class 3 Impact Resistant',
      standardPrice: 425,
      realtorPrice: 400,
    },
    dynasty: {
      name: 'IKO Dynasty Class 4 Impact Resistant',
      standardPrice: 450,
      realtorPrice: 425,
    },
    nordic: {
      name: 'IKO Nordic Class 4 Impact Resistant',
      standardPrice: 475,
      realtorPrice: 460,
    },
  };

  const squaresInput = document.getElementById('totalSquares');
  const realtorToggle = document.getElementById('useRealtorPricing');
  const systemRadios = document.querySelectorAll('input[name="roofSystem"]');

  const systemBadge = document.getElementById('systemBadge');
  const pricePerSquareEl = document.getElementById('pricePerSquare');
  const standardPriceEl = document.getElementById('standardPrice');
  const realtorPriceEl = document.getElementById('realtorPrice');
  const appliedTotalEl = document.getElementById('appliedTotal');
  const standardTotalEl = document.getElementById('standardTotal');

  function roundCurrency(value) {
    return Math.round(value).toLocaleString();
  }

  function getSelectedSystem() {
    const selected = document.querySelector('input[name="roofSystem"]:checked')?.value || 'cambridge';
    return roofSystems[selected];
  }

  function updateResults() {
    const system = getSelectedSystem();
    const squares = Math.max(parseFloat(squaresInput.value) || 0, 0);
    const useRealtorPricing = realtorToggle.checked;

    const appliedPrice = useRealtorPricing ? system.realtorPrice : system.standardPrice;
    const appliedTotal = squares * appliedPrice;
    const standardTotal = squares * system.standardPrice;

    systemBadge.textContent = system.name.split('IKO ')[1] ? `IKO ${system.name.split('IKO ')[1]}` : system.name;
    pricePerSquareEl.textContent = appliedPrice.toLocaleString();
    standardPriceEl.textContent = system.standardPrice.toLocaleString();
    realtorPriceEl.textContent = system.realtorPrice.toLocaleString();
    appliedTotalEl.textContent = roundCurrency(appliedTotal);
    standardTotalEl.textContent = roundCurrency(standardTotal);
  }

  squaresInput.addEventListener('input', () => {
    updateResults();
  });

  realtorToggle.addEventListener('change', updateResults);
  systemRadios.forEach((radio) => radio.addEventListener('change', updateResults));

  document.addEventListener('DOMContentLoaded', () => {
    updateResults();
  });
</script>
